var WSSP = {    OVERWRITE_NONE:1,    OVERWRITE_APPEND:2,    OVERWRITE_REPLACE:0,    TIMEOUT_INIFINTY:0,    lastDialog:null}(function(){    jQuery.preloadImages = function(){        for(var i = 0; i<arguments.length; i++)  {            jQuery("<img>").attr("src", arguments[i]);        }    }    function WizardDialogData(b,w,t){        return {            show:function(){                var box = WSSP[b]                if(!(box.noDialog||box.isMenuShown))box.show(w,t);            },            setTimeout:function(func){                return setTimeout(func,t);            }        };    }    function WizardBox(b){        return ({            box:b,            text:b.find('div.wizard_text'),            showing:false,            mousein:false,            noHide:false,            noDialog:false,            isMenuShown:false,            hide:function(time){                if(this.showing&&!(this.noHide||this.isMenuShown)){                    this.showing = false;                    this.text.fadeOut(500);                }            },            update:function(word){                this.text.find("div.content").attr("innerHTML","<p>"+word+"</p>");            },            show:function(word,time,append,size){                if(word){                    var c = this.text.find("div.content")                    if(!append||(!this.showing&&append==WSSP.OVERWRITE_NONE))                        append=WSSP.OVERWRITE_REPLACE;                    switch(append){                        case WSSP.OVERWRITE_REPLACE:{                            c.attr("innerHTML","<p>"+word+"</p>");                            break;                        }                        case WSSP.OVERWRITE_APPEND:{                            c.attr("innerHTML",c.attr("innerHTML")+"<p>"+word+"</p>");                            break;                        }                        case WSSP.OVERWRITE_NONE:{                            break;                        }                    }                    if(size){                        this.text.width(size);                    }else{                        this.text.width(160);                    }                }                if(!this.showing){//Only do this if nessary                    this.showing = true;                    this.text.fadeIn(500);                    if(time){                        var _this = this;                        setTimeout(function(){                            _this.hide(time);                        },time);                    }                }            },            init:function(){                var _this = this;                this.box.hover(function(){                    _this.mousein=true;                },function(){                    _this.mousein=false;                    _this.hide();                });                return this;            }        }).init();    }    var WSSP_AIHandler={        AI_SHOW_MENU:0,        AI_WAIT_ORDER:1,        AI_DONE:2,        AI_stat:0,        handle:function(which){            //document.title=this.AI_stat;            switch(this.AI_stat){                case this.AI_SHOW_MENU:                    this.AI_stat=this.AI_WAIT_ORDER;                    this.displayMenu(which);                    break;            }        },        displayMenu:function(which,menu){            if(!menu){                menu = this.AI_MainMenu;            }            var content=            '<p>'+this.AI_MenuStart[1]+'</p>'+            '<ul class="wizard_cmdlist">';            for(idx in menu){                content+='<li class="wizard_cmdlist_item"><a id="cmd_'+idx+'">'+this.menu[idx].display+'</a></li>';            }            content+='</ul>';            which.show(content,0,0,200);            which.isMenuShown = true;            var _this = this;            which.box.find("li.wizard_cmdlist_item a").click(function(){                _this.handleCmd(which,jQuery(this));            });        },        handleCmd:function(which,target){            which.isMenuShown=false;            try{                var idx = target.attr('id').split(/_/)[1];                if(this.AI_Commands[idx].command(which)){                    which.update(this.AI_MenuEnd[1]);                }            }catch(e){}            var _this = this;            setTimeout(function(){                _this.installMenuHook(which);            },1);        },        installMenuHook:function(which){            this.AI_stat=this.AI_SHOW_MENU;            which.box.one('click',function(){                WSSP.AIHandler.handle(which);            });        }    }    WSSP.ShowDialog=function(data){        //alert(this.lastDialog);        if(this.lastDialog)this.lastDialog.stop();        return (this.lastDialog={            cancel:false,            timerID:null,            start:function(){                var _this = this;                function dialog_itr(i){                    if(i>=data.length||_this.cancel)return;                    data[i].show();                    _this.timerID=data[i].setTimeout(function(){                        dialog_itr(i+1);                    });                }                dialog_itr(0);                return this;            },            stop:function(){                if(this.timerID)clearTimeout(this.timerID);                cancel=true;            }        }).start();    };    WSSP.init=function(){        WSSP.data = eval(JQuery.)        WSSP.left = WizardBox(jQuery('div#wizardbox_left'));        WSSP.right= WizardBox(jQuery('div#wizardbox_right'));        WSSP_AIHandler.installMenuHook(WSSP.left);        WSSP.left.box.hover(            function(){                if(!WSSP.left.isMenuShown)                    WSSP.left.show(                        WSSP.data.words.left[Math.floor(Math.random()*WSSP.words_left.length)],                        WSSP.TIMEOUT_INIFINTY,                        WSSP.OVERWRITE_NONE                        );            }            );        WSSP.right.box.hover(            function(){                if(!WSSP.right.isMenuShown)                    WSSP.right.show(                        WSSP.data.words.right[Math.floor(Math.random()*WSSP.words_right.length)],                        WSSP.TIMEOUT_INIFINTY,                        WSSP.OVERWRITE_NONE                        );            }            );        jQuery('div.wizardbox').fadeIn(500);    };    jQuery(WSSP.init);})();